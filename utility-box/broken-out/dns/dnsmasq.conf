# /etc/dnsmasq.d/dns-only.conf — DNS ONLY (no DHCP) for the fake env
# Attach me with: include=/etc/dnsmasq.d/dns-only.conf  (or copy into /etc/dnsmasq.conf).
# This instance only handles DNS (port=53) and DOES NOT run a DHCP server.
listen-address=10.90.0.3
bind-interfaces
port=53

# Logging during bring-up (optional)
log-queries
# log-facility=/var/log/dnsmasq-dns.log

# Authoritative DNS for example.com
domain=example.com
local=/example.com/
expand-hosts
domain-needed
bogus-priv
no-resolv
# Upstream resolvers (adjust for disconnected as needed)
server=1.1.1.1
server=8.8.8.8

# Cluster VIPs + registry per fake env
host-record=api.cluster.example.com,10.90.0.10
host-record=api-int.cluster.example.com,10.90.0.10
address=/.apps.cluster.example.com/10.90.0.11
host-record=registry.example.com,10.90.0.4

# Optional but recommended: publish node FQDNs for the static IPs handed out by DHCP
# (Uncomment and keep in sync with the DHCP reservations.)
# host-record=cluster-master0.cluster.example.com,10.90.0.20
# host-record=cluster-master1.cluster.example.com,10.90.0.21
# host-record=cluster-master2.cluster.example.com,10.90.0.22
# host-record=cluster-worker0.cluster.example.com,10.90.0.30
# host-record=cluster-worker1.cluster.example.com,10.90.0.31
# host-record=cluster-worker2.cluster.example.com,10.90.0.32

# Optional PTRs (reverse DNS) — adjust to taste; examples for VIPs/nodes:
# ptr-record=10.0.90.10.in-addr.arpa,api.cluster.example.com
# ptr-record=11.0.90.10.in-addr.arpa,*.apps.cluster.example.com
# ptr-record=20.0.90.10.in-addr.arpa,cluster-master0.cluster.example.com
# ptr-record=21.0.90.10.in-addr.arpa,cluster-master1.cluster.example.com
# ptr-record=22.0.90.10.in-addr.arpa,cluster-master2.cluster.example.com
# ptr-record=30.0.90.10.in-addr.arpa,cluster-worker0.cluster.example.com
# ptr-record=31.0.90.10.in-addr.arpa,cluster-worker1.cluster.example.com
# ptr-record=32.0.90.10.in-addr.arpa,cluster-worker2.cluster.example.com
