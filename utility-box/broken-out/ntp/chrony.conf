# /etc/chrony.conf — NTP server for the fake env (RHEL 9)
# Serves NTP to 10.90.0.0/24 and syncs with public sources (adjust as needed).
# Docs: RHEL 9 time synchronization (chrony) & chrony project examples.

# Use public pool or your organization's upstream NTP servers (replace for disconnected)
pool pool.ntp.org iburst

# Allow NTP clients from the lab subnet
allow 10.90.0.0/24

# Serve time even when offline (set high stratum so clients prefer real sources if available)
local stratum 10

# Step the clock on large initial offsets
makestep 1.0 3

# Record the rate at which the system clock gains/loses time
driftfile /var/lib/chrony/drift

# Logs (optional)
# logdir /var/log/chrony

# Bind to a specific address (optional). For this lab, NTP host = 10.90.0.2.
# bindaddress 10.90.0.2

# START: OCP Repo Fix — chrony: add rtcsync
rtcsync
# END: OCP Repo Fix — chrony: add rtcsync
