# /etc/dnsmasq.d/dhcp-only.conf — DHCP ONLY (no DNS) for the fake env
# Attach me with: include=/etc/dnsmasq.d/dhcp-only.conf  (or copy into /etc/dnsmasq.conf).
# This instance disables DNS by setting 'port=0' and only provides DHCP.
# If your box has multiple NICs, you may restrict DHCP to one with: interface=ens192
port=0
log-dhcp

# Authoritative for this subnet (hand out leases and override other DHCP on net)
dhcp-authoritative

# Address pool (dynamic), 12h lease time
dhcp-range=10.90.0.100,10.90.0.199,255.255.255.0,12h

# DHCPv4 OPTIONS (dnsmasq maps names to correct option codes)
dhcp-option=option:router,10.90.0.1                     # Default gateway (Opt 3)
dhcp-option=option:dns-server,10.90.0.3                  # DNS server (Opt 6) -> your DNS-only host
dhcp-option=option:domain-search,cluster.example.com,example.com   # Search list (Opt 119)
dhcp-option=option:ntp-server,10.90.0.2                  # NTP server (Opt 42)

# STATIC RESERVATIONS — keep hostnames simple (DHCP Option 12). FQDNs are resolved by DNS server.
# Fill in MAC addresses and remove CHANGE_ME_… placeholders.
# Control plane (masters)
dhcp-host=CHANGE_ME_MAC_master0,cluster-master0,10.90.0.20
dhcp-host=CHANGE_ME_MAC_master1,cluster-master1,10.90.0.21
dhcp-host=CHANGE_ME_MAC_master2,cluster-master2,10.90.0.22
# Workers
dhcp-host=CHANGE_ME_MAC_worker0,cluster-worker0,10.90.0.30
dhcp-host=CHANGE_ME_MAC_worker1,cluster-worker1,10.90.0.31
dhcp-host=CHANGE_ME_MAC_worker2,cluster-worker2,10.90.0.32

# Optional: lease file path (RHEL default shown). Uncomment only if you need to change it.
# dhcp-leasefile=/var/lib/misc/dnsmasq.leases
